<div class="dh-hudrings-root">
  <div class="dh-hudrings">
    
    <!-- GM Override Section -->
    <div class="gm-override-section">
      <label class="gm-override-header">
        <input type="checkbox" class="gm-override-checkbox" {{#if gmOverride.enabled}}checked{{/if}}>
        <span>GM Global Override - Apply these settings to all characters</span>
      </label>
      
      <div class="gm-override-controls" style="{{#unless gmOverride.enabled}}display: none;{{/unless}}">
        
        <!-- GM Theme Selection -->
        <div class="gm-theme-section">
          <label class="gm-theme-label">Global HUD Theme</label>
          <select class="gm-theme-select">
            <option value="">(use individual character themes)</option>
            {{#each colorChoices}}
              <option value="{{value}}" {{#if (eq value ../gmOverride.theme)}}selected{{/if}}>{{label}}</option>
            {{/each}}
          </select>
        </div>

        <!-- GM Ring Controls -->
        <div class="previews">
          <div class="preview-card">
            <div class="title">Global Portrait Ring</div>
            <div class="preview-box" data-target=".gm-path-portrait" title="Click to choose image">
              <img class="preview gm-preview-portrait" src="{{gmOverride.portrait}}" alt="global portrait ring preview" />
              <span class="placeholder">Search</span>
            </div>
            <div class="path-row">
              <input type="text" class="path gm-path-portrait" value="{{gmOverride.portrait}}" placeholder="path/to/global-portrait-ring.png" />
              <button type="button" class="clear-path" data-target=".gm-path-portrait" title="Clear">✕</button>
            </div>
          </div>

          <div class="preview-card">
            <div class="title">Global Weapons Ring</div>
            <div class="preview-box" data-target=".gm-path-weapons" title="Click to choose image">
              <img class="preview gm-preview-weapons" src="{{gmOverride.weapons}}" alt="global weapons ring preview" />
              <span class="placeholder">Search</span>
            </div>
            <div class="path-row">
              <input type="text" class="path gm-path-weapons" value="{{gmOverride.weapons}}" placeholder="path/to/global-weapons-ring.png" />
              <button type="button" class="clear-path" data-target=".gm-path-weapons" title="Clear">✕</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="cards">
      {{#if actors}}
        {{#each actors}}
          <div class="card" data-actor-id="{{id}}" data-color="{{colorScheme}}">
            <!-- Character + player -->
            <div class="card-head">
              <div class="who">
                <div class="char">{{name}}</div>
                <div class="player">{{playerLabel}}</div>
              </div>
              <div class="scheme">
                <label>HUD Theme</label>
                <select class="dh-color">
                  <option value="">(default / player)</option>
                  {{#each ../colorChoices}}
                    <option value="{{value}}">{{label}}</option>
                  {{/each}}
                </select>
              </div>
            </div>

            <!-- Previews side-by-side -->
            <div class="previews">
              <div class="preview-card">
                <div class="title">Portrait Ring</div>
                <div class="preview-box" data-target=".path-portrait" title="Click to choose image">
                  <img class="preview preview-portrait" src="{{portrait}}" alt="portrait ring preview" />
                  <span class="placeholder">Search</span>
                </div>
                <div class="path-row">
                  <input type="text" class="path path-portrait" value="{{portrait}}" placeholder="path/to/portrait-ring.png" />
                  <button type="button" class="clear-path" data-target=".path-portrait" title="Clear">✕</button>
                </div>
              </div>

              <div class="preview-card">
                <div class="title">Weapons Ring</div>
                <div class="preview-box" data-target=".path-weapons" title="Click to choose image">
                  <img class="preview preview-weapons" src="{{weapons}}" alt="weapons ring preview" />
                  <span class="placeholder">Search</span>
                </div>
                <div class="path-row">
                  <input type="text" class="path path-weapons" value="{{weapons}}" placeholder="path/to/weapons-ring.png" />
                  <button type="button" class="clear-path" data-target=".path-weapons" title="Clear">✕</button>
                </div>
              </div>
            </div>
          </div>
        {{/each}}
      {{else}}
        <p class="empty"><em>No player characters found.</em></p>
      {{/if}}
    </div>
  </div>

  <footer class="dh-hudrings-footer">
    <button type="button" class="dh-cancel"><i class="fas fa-times"></i> Cancel</button>
    <button type="button" class="dh-save"><i class="fas fa-save"></i> Save</button>
  </footer>
</div>